!function(t){var i={};function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(n,a,function(i){return t[i]}.bind(null,a));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=4)}([function(t,i,e){var n=e(1),a=e(2);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);t.exports=a.locals||{}},function(t,i,e){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(i){if(void 0===t[i]){var e=document.querySelector(i);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[i]=e}return t[i]}}(),r=[];function s(t){for(var i=-1,e=0;e<r.length;e++)if(r[e].identifier===t){i=e;break}return i}function h(t,i){for(var e={},n=[],a=0;a<t.length;a++){var o=t[a],h=i.base?o[0]+i.base:o[0],c=e[h]||0,u="".concat(h," ").concat(c);e[h]=c+1;var d=s(u),l={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(r[d].references++,r[d].updater(l)):r.push({identifier:u,updater:y(l,i),references:1}),n.push(u)}return n}function c(t){var i=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var a=e.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(t){i.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(i);else{var r=o(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}return i}var u,d=(u=[],function(t,i){return u[t]=i,u.filter(Boolean).join("\n")});function l(t,i,e,n){var a=e?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(i,a);else{var o=document.createTextNode(a),r=t.childNodes;r[i]&&t.removeChild(r[i]),r.length?t.insertBefore(o,r[i]):t.appendChild(o)}}function m(t,i,e){var n=e.css,a=e.media,o=e.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var w=null,f=0;function y(t,i){var e,n,a;if(i.singleton){var o=f++;e=w||(w=c(i)),n=l.bind(null,e,o,!1),a=l.bind(null,e,o,!0)}else e=c(i),n=m.bind(null,e,i),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return n(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;n(t=i)}else a()}}t.exports=function(t,i){(i=i||{}).singleton||"boolean"==typeof i.singleton||(i.singleton=a());var e=h(t=t||[],i);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<e.length;n++){var a=s(e[n]);r[a].references--}for(var o=h(t,i),c=0;c<e.length;c++){var u=s(e[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}e=o}}}},function(t,i,e){(i=e(3)(!1)).push([t.i,'html, body{\n    height:100%;\n    padding:0;\n    margin:0;\n}\n* {\n    font-family: "Lucida Console", Courier, monospace;\n}\nbody {\n\tpadding: 0;\n\tmargin: 0;\n\tbackground: black;\n}\ncanvas {\n\tbackground: #29adff;\n}\n.gameover-scoreboard,\n.gamestart-scoreboard {\n\theight: 100%;\n\tbackground: transparent;\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n  \tcolor: white;\n  \talign-items: center;\n    justify-content: center;\n\tdisplay: none;\n}\n.gameover-scoreboard {\n\topacity: .6;\n\tcolor: #ff004d;\n\tbackground: #29adff;\n}\n.gameover-scoreboard h1,\n.gamestart-scoreboard h1 {\n\ttext-align: center;\n}\n.gameover-scoreboard table,\n.gamestart-scoreboard table {\n\twidth: 100%;\n}\n.gameover-scoreboard p {\n\ttext-align: center;\n}\ntr.selected {\n\tfont-weight: bold;\n\tanimation: color-change 1s infinite;\n}\n@keyframes color-change {\n  0% { color: #ff004d; }\n  50% { color: black; }\n  100% { color: #ff004d; }\n}\n\n.gamestart-scoreboard {\n    display: flex;\n}\n\n.gamestart-scoreboard label {\n\tdisplay: block;\n}\ninput {\n\tpadding: 5px;\n\tbox-sizing : border-box;\n}\ninput[type="text"] {\n\tmargin-bottom: 10px;\n}\ninput[type="submit"] {\n\tbackground: #ff004d;\n\tborder: 1px solid #ff004d;\n\tcolor: white;\n\tpadding: 10px 0px;\n\tfont-size: 1.2em;\n}\n.gameover-scoreboard img {\n\tmargin: auto;\n}',""]),t.exports=i},function(t,i,e){"use strict";t.exports=function(t){var i=[];return i.toString=function(){return this.map((function(i){var e=function(t,i){var e=t[1]||"",n=t[3];if(!n)return e;if(i&&"function"==typeof btoa){var a=(r=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(h," */")),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([a]).join("\n")}var r,s,h;return[e].join("\n")}(i,t);return i[2]?"@media ".concat(i[2]," {").concat(e,"}"):e})).join("")},i.i=function(t,e,n){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(a[r]=!0)}for(var s=0;s<t.length;s++){var h=[].concat(t[s]);n&&a[h[0]]||(e&&(h[2]?h[2]="".concat(e," and ").concat(h[2]):h[2]=e),i.push(h))}},i}},function(t,i,e){"use strict";e.r(i);e(0);var n=e.p+"a535e346f0f14866b3f448ced8b54ceb.png";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var o=function t(i){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a(this,t),this.sound=document.createElement("audio"),this.sound.src=i,this.sound.loop=e,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}};function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}var c=function(){function t(i){var e=this;r(this,t),this.speed=1,this.image=i,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:4,y:0},{x:5,y:0},{x:6,y:0},{x:7,y:0},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:4,y:2},{x:5,y:2},{x:6,y:2},{x:7,y:2}],this.x=Math.ceil(window.UFO45.canvas.width/2-this.width/2),this.y=Math.ceil(window.UFO45.canvas.height/2-this.height/2),this.vector=[{x:0,y:0},{x:0,y:0}],window.UFO45.canvas.addEventListener("touchstart",(function(t){window.UFO45.gameStarted&&e.soundEffect.play(),e.ray.abducting=!0,e.ray.currentAnimationFrame=0,e.animationFrameCountThreshold=10})),window.UFO45.canvas.addEventListener("touchmove",(function(t){t.preventDefault(),e.vector[0].x=e.vector[1].x==t.touches[0].clientX?0:e.vector[1].x<t.touches[0].clientX?-1:1,e.vector[0].y=e.vector[1].y==t.touches[0].clientY?0:e.vector[1].y<t.touches[0].clientY?1:-1,e.vector[1].x=t.touches[0].clientX,e.vector[1].y=t.touches[0].clientY})),window.UFO45.canvas.addEventListener("touchend",(function(t){e.soundEffect.stop(),e.ray.abducting=!1,e.animationFrameCountThreshold=100})),this.soundEffect=new o("./../media/weird.mp3"),this.soundEffect.sound.volume=.3,this.crashSoundEffect=new o("./../media/crashbit.wav",!1),this.crashSoundEffect.sound.volume=1,this.ray=new u(i,this.x,this.y)}return h(t,[{key:"update",value:function(t){window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*this.height,this.width,this.height,this.x,this.y,this.width,this.height),this.animatePlayer(t),this.move(t),this.updatePlayersCollisionBox(t),this.canvasCollisionDetection(),this.ray.update(t)}},{key:"animatePlayer",value:function(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}},{key:"move",value:function(t){window.UFO45.gameStarted&&(this.x+=this.vector[0].x*this.speed,this.y-=this.vector[0].y*this.speed)}},{key:"updatePlayersCollisionBox",value:function(t){switch(window.UFO45.tileSize){case 48:this.collisionBox={x:this.x+8,y:this.y+2,width:this.width-16,height:this.height-3}}window.UFO45.debug&&(window.UFO45.context.strokeStyle="blue",window.UFO45.context.beginPath(),window.UFO45.context.rect(this.collisionBox.x,this.collisionBox.y,this.collisionBox.width,this.collisionBox.height),window.UFO45.context.stroke())}},{key:"canvasCollisionDetection",value:function(){this.x+this.width>=window.UFO45.canvas.width&&(this.x=Math.ceil(window.UFO45.canvas.width-this.width)),this.x<0&&(this.x=0),this.y+this.height>window.UFO45.canvas.height-window.UFO45.foreground.height&&(window.UFO45.gameOver=!0),this.y<0&&(this.y=0)}}]),t}(),u=function(){function t(i,e,n){r(this,t),this.x=e,this.y=n,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.image=i,this.abducting=!1,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:4,y:6},{x:5,y:6},{x:6,y:6},{x:3,y:7},{x:4,y:7},{x:5,y:7},{x:6,y:7},{x:7,y:7}]}return h(t,[{key:"update",value:function(t){this.x=window.UFO45.player.x,this.y=window.UFO45.player.y+window.UFO45.player.height,this.abducting&&window.UFO45.abducteeFactory.abductee.beingAbducted&&(window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*this.height,this.width,this.height,this.x,this.y,this.width,this.height),this.animate(t))}},{key:"animate",value:function(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}}]),t}();function d(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.speed=1,this.image=i,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.x=0,this.y=window.UFO45.canvas.height-this.width,this.numberOfTiles=Math.ceil(window.UFO45.canvas.width/window.UFO45.tileSize),this.animationFrameCount=0,this.animationFrameCountThreshold=20}var i,e,n;return i=t,(e=[{key:"update",value:function(t){for(var i=-1;i<this.numberOfTiles+1;i++)window.UFO45.context.drawImage(this.image,1*this.width,0*this.height,this.width,this.height,this.x+i*this.width,this.y,this.width,this.height);this.updateAnimationThreshold(),this.animate(t)}},{key:"updateAnimationThreshold",value:function(){window.UFO45.player.x<window.UFO45.player.vecX?this.animationFrameCountThreshold=10:this.animationFrameCountThreshold=20}},{key:"animate",value:function(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.x++,(this.x>this.width||this.x<-this.width)&&(this.x=0))}}])&&d(i.prototype,e),n&&d(i,n),t}();function m(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var w=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.font="18px monaco, monospace",this.color="black",this.x=10,this.y=30,this.score=0,window.UFO45.context.font=this.font}var i,e,n;return i=t,(e=[{key:"update",value:function(t){window.UFO45.gameStarted&&!window.UFO45.gameOver&&(this.score+=1*t/1e3),window.UFO45.context.fillStyle=this.color,window.UFO45.context.fillText("Score "+Math.floor(this.score),this.x,this.y)}}])&&m(i.prototype,e),n&&m(i,n),t}();function f(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t))+t}function y(t,i){return!(t.y+t.height<i.y||t.y>i.y+i.height||t.x+t.width<i.x||t.x>i.x+i.width)}function p(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.speed=2,this.image=i,this.width=2*window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.x=e,this.y=window.UFO45.canvas.height-2*this.height}var i,e,n;return i=t,(e=[{key:"update",value:function(){window.UFO45.player.vector[0].x>0?this.speed=3:this.speed=2,window.UFO45.context.drawImage(this.image,5*window.UFO45.tileSize,5*window.UFO45.tileSize,this.width,this.height,this.x,this.y,this.width,this.height),this.x-=this.speed,this.x<-this.width&&(this.x=f(window.UFO45.canvas.width,2*window.UFO45.canvas.width))}}])&&p(i.prototype,e),n&&p(i,n),t}();function g(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function F(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,i,e){return i&&F(t.prototype,i),e&&F(t,e),t}var x=function(){function t(i){g(this,t),this.image=i,this.topNumberOfEnemies=Math.ceil((window.UFO45.canvas.height-3*window.UFO45.tileSize)/window.UFO45.tileSize)*Math.ceil(window.UFO45.canvas.width/window.UFO45.tileSize)/4,this.secondsUntilNextEnemy=Math.ceil(200/this.topNumberOfEnemies),this.enemies=[],this.enemies.push(new O(i,0))}return b(t,[{key:"update",value:function(t){var i=Math.floor(window.UFO45.score.score);i%this.secondsUntilNextEnemy==0&&this.enemies.length<=i/this.secondsUntilNextEnemy&&this.enemies.length<=this.topNumberOfEnemies&&this.enemies.push(new O(this.image,this.enemies.length)),this.enemies.forEach((function(i){return i.update(t)}))}}]),t}(),O=function(){function t(i,e){var n,a;g(this,t),this.speed=1,this.image=i,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=300,this.animationFrames=[{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:2,y:7},{x:3,y:4},{x:3,y:5},{x:3,y:6}],this.currentAnimation=f(1,10)>6?"rain":"default",this.globalAlpha=(n=.3,a=.8,Math.round(10*(Math.random()*(a-n)+n))/10),this.randomizeCoordinates(),this.createRainDrops()}return b(t,[{key:"randomizeCoordinates",value:function(){this.x=f(window.UFO45.canvas.width,2*window.UFO45.canvas.width),this.y=f(0,window.UFO45.canvas.height-3*window.UFO45.tileSize)}},{key:"createRainDrops",value:function(){if("rain"==this.currentAnimation){this.rainDrops=[];for(var t=0;t<this.width;t++)for(var i=0;i<2*this.height;i++)t%5==0&&i%10==0&&this.rainDrops.push(new U(this.x+t,this.y+this.height+i,this))}}},{key:"update",value:function(t){window.UFO45.context.globalAlpha=this.globalAlpha,window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*this.height,this.width,this.height,this.x,this.y,this.width,this.height),window.UFO45.context.globalAlpha=1,this.move(),this.animateCloud(t),this.animateRain(t),this.collisionDetection()}},{key:"move",value:function(){this.x-=this.speed,this.x<-this.width&&(this.currentAnimation=f(1,10)>6?"rain":"default",this.currentAnimationFrame=0,this.randomizeCoordinates(),this.createRainDrops())}},{key:"animateCloud",value:function(t){if("rain"==this.currentAnimation){if(this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold)return;this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0)}}},{key:"animateRain",value:function(t){"rain"==this.currentAnimation&&this.rainDrops.forEach((function(t){return t.update()}))}},{key:"collisionDetection",value:function(){switch(window.UFO45.tileSize){case 48:this.collisionBox={x:this.x+5,y:this.y+16,width:this.width-8,height:this.height-29},this.collisionBox.height="rain"==this.currentAnimation?this.collisionBox.height+this.height+10:this.collisionBox.height}window.UFO45.debug&&(window.UFO45.context.strokeStyle="red",window.UFO45.context.beginPath(),window.UFO45.context.rect(this.collisionBox.x,this.collisionBox.y,this.collisionBox.width,this.collisionBox.height),window.UFO45.context.stroke()),y(this.collisionBox,window.UFO45.player.collisionBox)&&(window.UFO45.gameOver=!0)}}]),t}(),U=function(){function t(i,e,n){g(this,t),this.width=2,this.height=2,this.x=i,this.y=e,this.cloud=n}return b(t,[{key:"update",value:function(){window.UFO45.context.fillStyle="#94cff4",window.UFO45.context.fillRect(this.x,this.y,this.width,this.height),this.x-=this.cloud.speed,this.y++,this.y>this.cloud.y+2*this.cloud.height&&(this.y=this.cloud.y+this.cloud.height-this.cloud.height/4),this.x,this.width}}]),t}();function C(t){for(var i=t+"=",e=decodeURIComponent(document.cookie).split(";"),n=0;n<e.length;n++){for(var a=e[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(i))return a.substring(i.length,a.length)}return""}function S(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),window.UFO45.player.soundEffect.stop(),window.UFO45.player.crashSoundEffect.play(),window.UFO45.soundTrack.stop(),window.UFO45.mainscreenSoundtrack.play()}var i,e,n;return i=t,(e=[{key:"writeScore",value:function(){this.gameoverScoreboard=document.querySelector(".gameover-scoreboard"),this.gameoverScoreboard.style.display="flex",this.gameoverScoreboard.addEventListener("touchstart",(function(){location.reload()})),this.updateScore()}},{key:"updateScore",value:function(){var t=this,i=parseInt(C("playerId"));fetch("get-scores.php?playerScore=".concat(parseInt(window.UFO45.score.score),"&playerId=").concat(i)).then((function(t){return t.json()})).then((function(i){var e=t.gameoverScoreboard.querySelector("tbody"),n=parseInt(C("playerId"));e.innerHTML="",i.forEach((function(t){var i=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td"),r=document.createElement("td");a.innerHTML=t.rank,o.innerHTML=t.name,r.innerHTML=t.score,t.id===n&&i.classList.add("selected"),i.appendChild(a),i.appendChild(o),i.appendChild(r),e.appendChild(i)}))}))}}])&&S(i.prototype,e),n&&S(i,n),t}();function A(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var T=function(){function t(){var i=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.gamestartScoreboard=document.querySelector(".gamestart-scoreboard"),this.nameField=this.gamestartScoreboard.querySelector('input[type="text"]'),this.submitButton=this.gamestartScoreboard.querySelector('input[type="submit"]'),this.fillTopPlayers(),this.fillUserName(),this.submitButton.onclick=function(){i.playerNameEventListener()}}var i,e,n;return i=t,(e=[{key:"fillUserName",value:function(){var t=C("playerName");t&&(this.nameField.value=t)}},{key:"fillTopPlayers",value:function(){var t=this;fetch("get-top-players.php").then((function(t){return t.json()})).then((function(i){var e=t.gamestartScoreboard.querySelector("tbody");e.innerHTML="",i.forEach((function(t,i){var n=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td"),r=document.createElement("td");a.innerHTML=i+1,o.innerHTML=t.name,r.innerHTML=t.score;var s=parseInt(C("playerId"));parseInt(t.id)===s&&n.classList.add("selected"),n.appendChild(a),n.appendChild(o),n.appendChild(r),e.appendChild(n)}))}))}},{key:"playerNameEventListener",value:function(){var t=this,i=parseInt(C("playerId")),e=this.gamestartScoreboard.querySelector('input[type="text"]');if(e.value||(e.value="Anonymous"),e.value===C("playerName")&&!isNaN(parseInt(C("playerId"))))return this.startGame();var n=new FormData;n.append("playerId",!isNaN(i)&&i),n.append("playerName",e.value),fetch("submit-player-name.php",{method:"POST",body:n}).then((function(t){return t.json()})).then((function(i){t.startGame()}))}},{key:"startGame",value:function(){this.gamestartScoreboard.style.display="none",window.UFO45.startGame()}}])&&A(i.prototype,e),n&&A(i,n),t}();function E(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var M=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=i,this.width=window.UFO45.tileSize,this.height=2*window.UFO45.tileSize,this.x=e,this.y=window.UFO45.canvas.height-this.height-window.UFO45.tileSize,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:4,y:3},{x:5,y:3},{x:6,y:3},{x:7,y:3}]}var i,e,n;return i=t,(e=[{key:"update",value:function(t){window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*window.UFO45.tileSize,this.width,this.height,this.x,this.y,this.width,this.height),this.x--,this.animate(t)}},{key:"animate",value:function(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}}])&&E(i.prototype,e),n&&E(i,n),t}();function z(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var B=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=i,this.width=2*window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.x=e,this.y=window.UFO45.canvas.height-this.height-window.UFO45.tileSize,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7}],this.speedAnimationFrameCount=0,this.speedAnimationFrameCountThreshold=50,this.beingAbducted=!1,this.abductedResistance=100,this.direction=1}var i,e,n;return i=t,(e=[{key:"update",value:function(t){window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*window.UFO45.tileSize,this.width,this.height,this.x,this.y,this.width,this.height),this.animate(t),this.move(t),this.collisionDetection(t)}},{key:"animate",value:function(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}},{key:"move",value:function(t){this.abductedResistance<0&&(this.y--,this.x+=this.direction,this.x+this.width>window.UFO45.canvas.width&&(this.direction*=-1)),this.speedAnimationFrameCount+=1*t,this.speedAnimationFrameCount<this.speedAnimationFrameCountThreshold||(this.speedAnimationFrameCount=0,this.x--)}},{key:"collisionDetection",value:function(t){var i=this;switch(window.UFO45.tileSize){case 48:this.collisionBox={x:this.x+10,y:this.y+1,width:this.width-18,height:this.height}}if(window.UFO45.debug&&(window.UFO45.context.strokeStyle="red",window.UFO45.context.beginPath(),window.UFO45.context.rect(this.collisionBox.x,this.collisionBox.y,this.collisionBox.width,this.collisionBox.height),window.UFO45.context.stroke()),y(this.collisionBox,window.UFO45.player.ray)){this.beingAbducted=!0,this.abductedResistance--;var e,n=window.UFO45.context.getImageData(this.collisionBox.x,this.collisionBox.y,this.collisionBox.width,this.collisionBox.height);for(e=0;e<n.data.length;e+=4)n.data[e]=f(0,255)-n.data[e],n.data[e+1]=f(150,255)-n.data[e+1],n.data[e+2]=f(255,255)-n.data[e+2],n.data[e+3]=255;window.UFO45.context.putImageData(n,this.collisionBox.x,this.collisionBox.y)}else this.beingAbducted=!1;this.abductedResistance<0&&window.UFO45.CloudEnemies.enemies.forEach((function(t){y(i.collisionBox,t)&&(t.x=-t.width,i.direction*=-1)}))}}])&&z(i.prototype,e),n&&z(i,n),t}();function j(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var I=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=i,this.createRandomAbductee()}var i,e,n;return i=t,(e=[{key:"createRandomAbductee",value:function(){var t=100*Math.random(),i=f(window.UFO45.canvas.width,2*window.UFO45.canvas.width);this.abductee=t<=100?new B(this.image,i):new M(this.image,i)}},{key:"update",value:function(t){this.abductee.update(t),this.abductee.x+this.abductee.width<0&&(delete this.abductee,this.createRandomAbductee())}}])&&j(i.prototype,e),n&&j(i,n),t}();function P(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function N(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L(t,i,e){return i&&N(t.prototype,i),e&&N(t,e),t}var R=function(){function t(i){P(this,t),this.day=!1,this.canvas=window.UFO45.canvas,this.lastUpdate=0,this.createStars()}return L(t,[{key:"update",value:function(t){var i=Math.floor(window.UFO45.score.score);i>1&&i%60==0&&i>this.lastUpdate&&(this.canvas.style.background=this.day?"#29adff":"#1d2b53",this.day=!this.day,this.lastUpdate=i),this.stars.forEach((function(i){return i.update(t)}))}},{key:"createStars",value:function(){this.stars=[];for(var t=window.UFO45.canvas.width*window.UFO45.canvas.height/400,i=0;i<t;i++)this.stars.push(new D)}}]),t}(),D=function(){function t(){P(this,t),this.x=f(0,1.5*window.UFO45.canvas.width),this.y=f(0,window.UFO45.canvas.height-window.UFO45.tileSize),this.width=1,this.height=1}return L(t,[{key:"randomizeCoordinates",value:function(){this.x=f(window.UFO45.canvas.width,2*window.UFO45.canvas.width),this.y=f(0,window.UFO45.canvas.height-window.UFO45.tileSize)}},{key:"update",value:function(t){window.UFO45.background.day&&(window.UFO45.context.fillStyle="white",window.UFO45.context.fillRect(this.x,this.y,this.width,this.height),this.x--,this.x+this.width<0&&this.randomizeCoordinates())}}]),t}();function H(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var q=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=i,this.width=10*window.UFO45.tileSize,this.height=5*window.UFO45.tileSize,this.x=window.UFO45.canvas.width,this.y=window.UFO45.canvas.height-this.height-window.UFO45.tileSize}var i,e,n;return i=t,(e=[{key:"update",value:function(){window.UFO45.context.drawImage(this.image,8*window.UFO45.tileSize,0,this.width,this.height,this.x,this.y,this.width,this.height),this.x--}}])&&H(i.prototype,e),n&&H(i,n),t}();function _(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var G=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context=this.canvas.getContext("2d"),this.tileSize=48,this.gameStarted=!1,this.gameOver=!1,this.debug=!1,this.mainscreenSoundtrack=new o("./../media/just-because.mp3")}var i,e,a;return i=t,(e=[{key:"init",value:function(){var t=this,i=new Image;i.src=n,this.soundTrack=new o("./../media/UFOAbduction.mp3"),this.score=new w,this.background=new R(i),this.player=new c(i),this.foreground=new l(i),this.CloudEnemies=new x(i),this.abducteeFactory=new I(i),this.house=new q(i),this.bushes=[new v(i,Math.ceil(Math.random()*window.UFO45.canvas.width)),new v(i,Math.ceil(Math.random()*window.UFO45.canvas.width)),new v(i,Math.ceil(Math.random()*window.UFO45.canvas.width))],this.SplashScreen=new T,requestAnimationFrame((function(i){return t.update(i)}))}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"update",value:function(t){var i=this,e=t-(this.lastUpdate||0);if(this.lastUpdate=t,this.clear(),this.background.update(e),this.house&&(this.house.x<-this.house.width?delete this.house:this.house.update(e)),this.score.update(e),this.gameStarted&&(this.player.update(e),this.CloudEnemies.update(e)),this.foreground.update(e),this.bushes.forEach((function(t){t.update(e)})),this.abducteeFactory.update(e),this.gameOver)return this.scoreUpdater=new k,this.scoreUpdater.writeScore();requestAnimationFrame((function(t){return i.update(t)}))}},{key:"startGame",value:function(){window.UFO45.soundTrack.play(),window.UFO45.gameStarted=!0}}])&&_(i.prototype,e),a&&_(i,a),t}();window.UFO45=new G,window.onload=function(){window.UFO45.init()}}]);