{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=5)}([function(t,e,i){var n=i(1),o=i(2);\"string\"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,\"\"]]);var a={insert:\"head\",singleton:!1};n(o,a);t.exports=o.locals||{}},function(t,e,i){\"use strict\";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),s=[];function r(t){for(var e=-1,i=0;i<s.length;i++)if(s[i].identifier===t){e=i;break}return e}function h(t,e){for(var i={},n=[],o=0;o<t.length;o++){var a=t[o],h=e.base?a[0]+e.base:a[0],c=i[h]||0,d=\"\".concat(h,\" \").concat(c);i[h]=c+1;var l=r(d),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==l?(s[l].references++,s[l].updater(u)):s.push({identifier:d,updater:f(u,e),references:1}),n.push(d)}return n}function c(t){var e=document.createElement(\"style\"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),\"function\"==typeof t.insert)t.insert(e);else{var s=a(t.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(e)}return e}var d,l=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join(\"\\n\")});function u(t,e,i,n){var o=i?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var a=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function m(t,e,i){var n=i.css,o=i.media,a=i.sourceMap;if(o?t.setAttribute(\"media\",o):t.removeAttribute(\"media\"),a&&btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,w=0;function f(t,e){var i,n,o;if(e.singleton){var a=w++;i=p||(p=c(e)),n=u.bind(null,i,a,!1),o=u.bind(null,i,a,!0)}else i=c(e),n=m.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=o());var i=h(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=r(i[n]);s[o].references--}for(var a=h(t,e),c=0;c<i.length;c++){var d=r(i[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}i=a}}}},function(t,e,i){(e=i(3)(!1)).push([t.i,'html, body{\\n    height:100%;\\n    padding:0;\\n    margin:0;\\n}\\n* {\\n    font-family: \"Lucida Console\", Courier, monospace;\\n}\\nbody {\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tbackground: black;\\n}\\ncanvas {\\n\\tbackground: #29adff;\\n}\\n.gameover-scoreboard,\\n.gamestart-scoreboard {\\n\\theight: 100%;\\n\\tbackground: #29adff;\\n\\topacity: .6;\\n\\tposition: fixed;\\n\\twidth: 100%;\\n\\theight: 100%;\\n  \\tcolor: white;\\n  \\talign-items: center;\\n    justify-content: center;\\n\\tdisplay: none;\\n}\\n.gameover-scoreboard {\\n\\tcolor: #ff004d;\\n}\\n.gameover-scoreboard h1,\\n.gamestart-scoreboard h1 {\\n\\ttext-align: center;\\n}\\n.gameover-scoreboard table,\\n.gamestart-scoreboard table {\\n\\twidth: 100%;\\n}\\n.gameover-scoreboard p {\\n\\ttext-align: center;\\n}\\ntr.selected {\\n\\tfont-weight: bold;\\n\\tanimation: color-change 1s infinite;\\n}\\n@keyframes color-change {\\n  0% { color: #ff004d; }\\n  50% { color: black; }\\n  100% { color: #ff004d; }\\n}\\n\\n.gamestart-scoreboard {\\n    display: flex;\\n}\\n\\n.gamestart-scoreboard label {\\n\\tdisplay: block;\\n}\\ninput {\\n\\tpadding: 5px;\\n\\tbox-sizing : border-box;\\n}\\ninput[type=\"text\"] {\\n\\tmargin-bottom: 10px;\\n}\\ninput[type=\"submit\"] {\\n\\tbackground: #ff004d;\\n\\tborder: 1px solid #ff004d;\\n\\tcolor: white;\\n\\tpadding: 10px 0px;\\n\\tfont-size: 1.2em;\\n}\\n.gameover-scoreboard img {\\n\\tmargin: auto;\\n}',\"\"]),t.exports=e},function(t,e,i){\"use strict\";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||\"\",n=t[3];if(!n)return i;if(e&&\"function\"==typeof btoa){var o=(s=n,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),h=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(r),\"/*# \".concat(h,\" */\")),a=n.sources.map((function(t){return\"/*# sourceURL=\".concat(n.sourceRoot||\"\").concat(t,\" */\")}));return[i].concat(a).concat([o]).join(\"\\n\")}var s,r,h;return[i].join(\"\\n\")}(e,t);return e[2]?\"@media \".concat(e[2],\" {\").concat(i,\"}\"):i})).join(\"\")},e.i=function(t,i,n){\"string\"==typeof t&&(t=[[null,t,\"\"]]);var o={};if(n)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(o[s]=!0)}for(var r=0;r<t.length;r++){var h=[].concat(t[r]);n&&o[h[0]]||(i&&(h[2]?h[2]=\"\".concat(i,\" and \").concat(h[2]):h[2]=i),e.push(h))}},e}},function(t,e){throw new Error(\"Module parse failed: Unexpected token (20:62)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     const score = window.UFO45.score.score;\\n| \\n>     if (score > this.enemies.length && this.enemies.length <= )\\n| \\n|     this.enemies.forEach((enemy) => enemy.update(deltaTime));\")},function(t,e,i){\"use strict\";i.r(e);i(0);var n=i.p+\"ebf1f7255206439f2bc85b548cf7f4e0.png\";class o{constructor(t,e=!0){this.sound=document.createElement(\"audio\"),this.sound.src=t,this.sound.loop=e,this.sound.setAttribute(\"preload\",\"auto\"),this.sound.setAttribute(\"controls\",\"none\"),this.sound.style.display=\"none\",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}}}class a{constructor(t){this.speed=1,this.image=t,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:4,y:0},{x:5,y:0},{x:6,y:0},{x:7,y:0},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:4,y:2},{x:5,y:2},{x:6,y:2},{x:7,y:2}],this.x=Math.ceil(window.UFO45.canvas.width/2-this.width/2),this.y=Math.ceil(window.UFO45.canvas.height/2-this.height/2),this.vector=[{x:0,y:0},{x:0,y:0}],window.UFO45.canvas.addEventListener(\"touchstart\",t=>{window.UFO45.gameStarted&&this.soundEffect.play(),this.ray.abducting=!0,this.animationFrameCountThreshold=10}),window.UFO45.canvas.addEventListener(\"touchmove\",t=>{t.preventDefault(),this.vector[0].x=this.vector[1].x==t.touches[0].clientX?0:this.vector[1].x<t.touches[0].clientX?-1:1,this.vector[0].y=this.vector[1].y==t.touches[0].clientY?0:this.vector[1].y<t.touches[0].clientY?1:-1,this.vector[1].x=t.touches[0].clientX,this.vector[1].y=t.touches[0].clientY}),window.UFO45.canvas.addEventListener(\"touchend\",t=>{this.soundEffect.stop(),this.ray.abducting=!1,this.animationFrameCountThreshold=100}),this.soundEffect=new o(\"./../media/weird.mp3\"),this.soundEffect.sound.volume=.3,this.crashSoundEffect=new o(\"./../media/crashbit.wav\",!1),this.crashSoundEffect.sound.volume=1,this.ray=new s(t,this.x,this.y)}update(t){window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*this.height,this.width,this.height,this.x,this.y,this.width,this.height),this.animatePlayer(t),this.move(t),this.updatePlayersCollisionBox(t),this.canvasCollisionDetection(),this.ray.update(t)}animatePlayer(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}move(t){window.UFO45.gameStarted&&(this.x+=this.vector[0].x,this.y-=this.vector[0].y)}updatePlayersCollisionBox(t){switch(window.UFO45.tileSize){case 48:this.collisionBox={x:this.x+8,y:this.y+2,width:this.width-16,height:this.height-3}}window.UFO45.debug&&(window.UFO45.context.strokeStyle=\"blue\",window.UFO45.context.beginPath(),window.UFO45.context.rect(this.collisionBox.x,this.collisionBox.y,this.collisionBox.width,this.collisionBox.height),window.UFO45.context.stroke())}canvasCollisionDetection(){this.x+this.width>=window.UFO45.canvas.width&&(this.x=Math.ceil(window.UFO45.canvas.width-this.width)),this.x<0&&(this.x=0),this.y+this.height>window.UFO45.canvas.height-window.UFO45.foreground.height&&(window.UFO45.gameOver=!0),this.y<0&&(this.y=0)}}class s{constructor(t,e,i){this.x=e,this.y=i,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.image=t,this.abducting=!1,this.currentAnimationFrame=0,this.animationFrameCount=0,this.animationFrameCountThreshold=100,this.animationFrames=[{x:4,y:6},{x:5,y:6},{x:6,y:6},{x:3,y:7},{x:4,y:7},{x:5,y:7},{x:6,y:7},{x:7,y:7}]}update(t){!this.abducting||window.UFO45.player.y<window.UFO45.canvas.height-4*window.UFO45.tileSize||(this.x=window.UFO45.player.x,this.y=window.UFO45.player.y+window.UFO45.player.height,window.UFO45.context.drawImage(this.image,this.animationFrames[this.currentAnimationFrame].x*this.width,this.animationFrames[this.currentAnimationFrame].y*this.height,this.width,this.height,this.x,this.y,this.width,this.height),this.animate(t))}animate(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.currentAnimationFrame++,this.currentAnimationFrame>=this.animationFrames.length&&(this.currentAnimationFrame=0))}}class r{constructor(t){this.speed=1,this.image=t,this.width=window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.x=0,this.y=window.UFO45.canvas.height-this.width,this.numberOfTiles=Math.ceil(window.UFO45.canvas.width/window.UFO45.tileSize),this.animationFrameCount=0,this.animationFrameCountThreshold=20}update(t){for(let t=-1;t<this.numberOfTiles+1;t++)window.UFO45.context.drawImage(this.image,1*this.width,0*this.height,this.width,this.height,this.x+t*this.width,this.y,this.width,this.height);this.updateAnimationThreshold(),this.animate(t)}updateAnimationThreshold(){window.UFO45.player.x<window.UFO45.player.vecX?this.animationFrameCountThreshold=10:this.animationFrameCountThreshold=20}animate(t){this.animationFrameCount+=1*t,this.animationFrameCount<this.animationFrameCountThreshold||(this.animationFrameCount=0,this.x++,(this.x>this.width||this.x<-this.width)&&(this.x=0))}}class h{constructor(){this.font=\"18px monaco, monospace\",this.color=\"black\",this.x=10,this.y=30,this.score=0,window.UFO45.context.font=this.font}update(t){window.UFO45.gameStarted&&!window.UFO45.gameOver&&(this.score+=1*t/1e3),window.UFO45.context.fillStyle=this.color,window.UFO45.context.fillText(\"Score \"+Math.floor(this.score),this.x,this.y)}}class c{constructor(t,e){this.speed=2,this.image=t,this.width=2*window.UFO45.tileSize,this.height=window.UFO45.tileSize,this.x=e,this.y=window.UFO45.canvas.height-2*this.height}update(){var t,e;window.UFO45.player.vector[0].x>0?this.speed=3:this.speed=2,window.UFO45.context.drawImage(this.image,5*window.UFO45.tileSize,5*window.UFO45.tileSize,this.width,this.height,this.x,this.y,this.width,this.height),this.x-=this.speed,this.x<-this.width&&(this.x=(t=window.UFO45.canvas.width,e=2*window.UFO45.canvas.width,t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t))}}var d=i(4),l=i.n(d);function u(t){for(var e=t+\"=\",i=decodeURIComponent(document.cookie).split(\";\"),n=0;n<i.length;n++){for(var o=i[n];\" \"==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return\"\"}class m{constructor(){window.UFO45.player.soundEffect.stop(),window.UFO45.player.crashSoundEffect.play(),window.UFO45.soundTrack.stop()}writeScore(){this.gameoverScoreboard=document.querySelector(\".gameover-scoreboard\"),this.gameoverScoreboard.style.display=\"flex\",this.gameoverScoreboard.addEventListener(\"touchstart\",()=>{location.reload()}),this.updateScore()}updateScore(){const t=parseInt(u(\"playerId\"));fetch(`get-scores.php?playerScore=${parseInt(window.UFO45.score.score)}&playerId=${t}`).then(t=>t.json()).then(t=>{let e=this.gameoverScoreboard.querySelector(\"tbody\"),i=parseInt(u(\"playerId\"));e.innerHTML=\"\",t.forEach(t=>{let n=document.createElement(\"tr\"),o=document.createElement(\"td\"),a=document.createElement(\"td\"),s=document.createElement(\"td\");o.innerHTML=t.rank,a.innerHTML=t.name,s.innerHTML=t.score,t.id===i&&n.classList.add(\"selected\"),n.appendChild(o),n.appendChild(a),n.appendChild(s),e.appendChild(n)})})}}class p{constructor(){this.gamestartScoreboard=document.querySelector(\".gamestart-scoreboard\"),this.nameField=this.gamestartScoreboard.querySelector('input[type=\"text\"]'),this.submitButton=this.gamestartScoreboard.querySelector('input[type=\"submit\"]'),this.fillTopPlayers(),this.fillUserName(),this.submitButton.onclick=()=>{this.playerNameEventListener()}}fillUserName(){const t=u(\"playerName\");t&&(this.nameField.value=t)}fillTopPlayers(){fetch(\"get-top-players.php\").then(t=>t.json()).then(t=>{let e=this.gamestartScoreboard.querySelector(\"tbody\");e.innerHTML=\"\",t.forEach((t,i)=>{let n=document.createElement(\"tr\"),o=document.createElement(\"td\"),a=document.createElement(\"td\"),s=document.createElement(\"td\");o.innerHTML=i+1,a.innerHTML=t.name,s.innerHTML=t.score;const r=parseInt(u(\"playerId\"));parseInt(t.id)===r&&n.classList.add(\"selected\"),n.appendChild(o),n.appendChild(a),n.appendChild(s),e.appendChild(n)})})}playerNameEventListener(){const t=parseInt(u(\"playerId\")),e=this.gamestartScoreboard.querySelector('input[type=\"text\"]');if(e.value||(e.value=\"Anonymous\"),e.value===u(\"playerName\")&&!isNaN(parseInt(u(\"playerId\"))))return this.startGame();const i=new FormData;i.append(\"playerId\",!isNaN(t)&&t),i.append(\"playerName\",e.value),fetch(\"submit-player-name.php\",{method:\"POST\",body:i}).then(t=>t.json()).then(t=>{this.startGame()})}startGame(){this.gamestartScoreboard.style.display=\"none\",window.UFO45.startGame()}}window.UFO45=new class{constructor(){this.canvas=document.getElementById(\"canvas\"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context=this.canvas.getContext(\"2d\"),this.tileSize=48,this.gameStarted=!1,this.gameOver=!1,this.debug=!1}init(){let t=new Image;t.src=n,this.soundTrack=new o(\"./../media/soundtrack.mp3\"),this.score=new h,this.player=new a(t),this.foreground=new r(t),this.CloudEnemies=new l.a(t),this.bushes=[new c(t,Math.ceil(Math.random()*window.UFO45.canvas.width)),new c(t,Math.ceil(Math.random()*window.UFO45.canvas.width)),new c(t,Math.ceil(Math.random()*window.UFO45.canvas.width))],this.SplashScreen=new p,requestAnimationFrame(t=>this.update(t))}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}update(t){const e=t-(this.lastUpdate||0);if(this.lastUpdate=t,this.clear(),this.score.update(e),this.gameStarted&&(this.player.update(e),this.CloudEnemies.update(e)),this.foreground.update(e),this.bushes.forEach(t=>{t.update(e)}),this.gameOver)return this.scoreUpdater=new m,this.scoreUpdater.writeScore();requestAnimationFrame(t=>this.update(t))}startGame(){window.UFO45.soundTrack.play(),window.UFO45.gameStarted=!0}},window.onload=function(){window.UFO45.init()}}]);","extractedComments":[]}